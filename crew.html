<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TravylWay - Airline Crew Transportation</title>
    
    <!-- Cloudflare Turnstile -->
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
    <link rel="preconnect" href="https://challenges.cloudflare.com">
    
    <!-- Google Maps API -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBQPVMR-qUW_uDz8TGazVXFP5J8ZEEkEyo&libraries=places&callback=initGoogleMaps" async defer></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 600px;
            width: 100%;
        }
        
        .logo {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .logo h1 {
            color: #1e3c72;
            font-size: 32px;
            margin-bottom: 5px;
        }
        
        .logo p {
            color: #666;
            font-size: 14px;
        }
        
        .crew-hero {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .crew-hero h2 {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .crew-hero .crew-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
            font-size: 14px;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 15px;
            font-family: inherit;
            transition: border-color 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #1e3c72;
        }
        
        textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        .row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .crew-id-section {
            background: #fff9e6;
            border: 2px dashed #ffc107;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }
        
        .crew-id-section h4 {
            color: #ff8f00;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .turnstile-container {
            margin: 25px 0;
            display: flex;
            justify-content: center;
        }
        
        button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 60, 114, 0.4);
        }
        
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .message {
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: none;
            font-size: 14px;
        }
        
        .message.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
            display: block;
        }
        
        .message.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            display: block;
        }
        
        .discount-badge {
            background: #4CAF50;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 15px;
        }
        
        .info-text {
            color: #666;
            font-size: 13px;
            font-style: italic;
        }
        
        .price-estimate {
            background: #e3f2fd;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 1.5rem 0;
            border-left: 4px solid #2196f3;
            display: none;
        }
        
        .price-estimate h3 {
            margin: 0 0 0.5rem 0;
            color: #1565c0;
            font-size: 1.1rem;
        }
        
        .price-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 0.75rem;
        }
        
        .distance {
            color: #1976d2;
            font-size: 0.95rem;
        }
        
        .price {
            font-size: 1.8rem;
            font-weight: 900;
            color: #0d47a1;
        }
        
        .calc-btn {
            background: #2196f3;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            margin: 1rem 0;
            width: 100%;
            font-size: 1rem;
            transition: background 0.3s;
        }
        
        .calc-btn:hover {
            background: #1976d2;
        }
        
        .calc-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        optgroup {
            font-weight: 700;
            font-style: normal;
            color: #333;
            background: #f5f5f5;
        }

        optgroup option {
            font-weight: 400;
            padding-left: 10px;
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 25px;
            }
            
            .logo h1 {
                font-size: 26px;
            }
            
            .crew-hero h2 {
                font-size: 20px;
            }
            
            .row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">
            <h1>TravylWay</h1>
            <p>Professional Airport Transportation</p>
        </div>
        
        <div class="crew-hero">
            <div class="crew-icon">‚úàÔ∏è</div>
            <h2>Airline Crew Transportation</h2>
            <p>Special discounted rates for airline crew members</p>
        </div>
        
        <span class="discount-badge">‚ú® Special Crew Member Rates</span>
        
        <div id="bookingMessage" class="message"></div>
        
        <form id="crewBookingForm">
            <!-- Hidden field to mark this as crew booking -->
            <input type="hidden" name="flight_crew" value="yes">
            <input type="hidden" name="booking_source" value="crew_page">
            
            <div class="form-group">
                <label for="crashpadSelect">Denver Based Flight Attendants (Optional)</label>
                <select id="crashpadSelect" name="crashpadSelect">
                    <option value="">-- Select a crash pad or enter address below --</option>
                    <option value="6660 Lisbon Street, Aurora, CO 80019">6660 Lisbon Street, Aurora, CO 80019</option>
                    <option value="1777 Willow St, Denver, CO 80220">1777 Willow St, Denver, CO 80220</option>
                    <option value="5489 Netherland St, Denver, CO 80249">5489 Netherland St, Denver, CO 80249</option>
                    <option value="20920 52nd Ave, Denver, CO 80249">20920 52nd Ave, Denver, CO 80249</option>
                    <option value="4909 Green Valley Ranch Blvd, Denver, CO 80249">4909 Green Valley Ranch Blvd, Denver, CO 80249</option>
                    <option value="20040 Mitchell Cir, Denver, CO 80249">20040 Mitchell Cir, Denver, CO 80249</option>
                    <option value="18001 E 47th Dr, Denver, CO 80249">18001 E 47th Dr, Denver, CO 80249</option>
                    <option value="18109 E 51st Pl, Denver, CO 80249">18109 E 51st Pl, Denver, CO 80249</option>
                    <option value="18113 E 51st Ave, Denver, CO 80249">18113 E 51st Ave, Denver, CO 80249</option>
                    <option value="10058 Granby St, Commerce City, CO 80022">10058 Granby St, Commerce City, CO 80022</option>
                    <option value="11446 Helena St, Commerce City, CO 80022">11446 Helena St, Commerce City, CO 80022</option>
                    <option value="12975 E 107th Pl, Commerce City, CO 80022">12975 E 107th Pl, Commerce City, CO 80022</option>
                </select>
                <small class="info-text">Select your crash pad to auto-fill the address, or enter manually below</small>
            </div>
            
            <div class="form-group">
                <label for="airportSelect">Select Your Airport (Optional)</label>
                <select id="airportSelect" name="airportSelect">
                    <option value="">-- Select airport or enter custom location --</option>
                    
                    <!-- UNITED STATES - WEST -->
                    <optgroup label="üá∫üá∏ West Coast">
                        <option value="Los Angeles International Airport">LAX - Los Angeles International Airport</option>
                        <option value="San Francisco International Airport">SFO - San Francisco International Airport</option>
                        <option value="Seattle-Tacoma International Airport">SEA - Seattle-Tacoma International Airport</option>
                        <option value="Portland International Airport">PDX - Portland International Airport</option>
                        <option value="San Diego International Airport">SAN - San Diego International Airport</option>
                        <option value="Norman Y. Mineta San Jose International Airport">SJC - San Jose International Airport</option>
                        <option value="Hollywood Burbank Airport">BUR - Hollywood Burbank Airport</option>
                        <option value="Long Beach Airport">LGB - Long Beach Airport</option>
                        <option value="Fresno Yosemite International Airport">FAT - Fresno Yosemite International Airport</option>
                        <option value="Las Vegas Harry Reid International Airport">LAS - Las Vegas Harry Reid International Airport</option>
                    </optgroup>
                    
                    <!-- UNITED STATES - MOUNTAIN -->
                    <optgroup label="üá∫üá∏ Mountain Region">
                        <option value="Denver International Airport">DEN - Denver International Airport</option>
                        <option value="Colorado Springs Airport, 7770 Milton E Proby Pkwy, Colorado Springs, CO 80916">COS - Colorado Springs Airport</option>
                        <option value="Phoenix Sky Harbor International Airport">PHX - Phoenix Sky Harbor International Airport</option>
                        <option value="Salt Lake City International Airport">SLC - Salt Lake City International Airport</option>
                        <option value="Albuquerque International Sunport">ABQ - Albuquerque International Sunport</option>
                        <option value="Santa Fe Regional Airport">SAF - Santa Fe Regional Airport</option>
                        <option value="Boise Airport">BOI - Boise Airport</option>
                    </optgroup>
                    
                    <!-- UNITED STATES - MIDWEST -->
                    <optgroup label="üá∫üá∏ Midwest">
                        <option value="Chicago O'Hare International Airport">ORD - Chicago O'Hare International Airport</option>
                        <option value="Chicago Midway International Airport">MDW - Chicago Midway International Airport</option>
                        <option value="Minneapolis-St. Paul International Airport">MSP - Minneapolis-St. Paul International Airport</option>
                        <option value="Detroit Metropolitan Wayne County Airport">DTW - Detroit Metropolitan Airport</option>
                        <option value="Indianapolis International Airport">IND - Indianapolis International Airport</option>
                        <option value="Kansas City International Airport">MCI - Kansas City International Airport</option>
                        <option value="Dane County Regional Airport">MSN - Dane County Regional Airport (Madison)</option>
                    </optgroup>
                    
                    <!-- UNITED STATES - SOUTH -->
                    <optgroup label="üá∫üá∏ South">
                        <option value="Hartsfield-Jackson Atlanta International Airport">ATL - Hartsfield-Jackson Atlanta International Airport</option>
                        <option value="Dallas/Fort Worth International Airport">DFW - Dallas/Fort Worth International Airport</option>
                        <option value="George Bush Intercontinental Airport">IAH - Houston George Bush Intercontinental</option>
                        <option value="Austin-Bergstrom International Airport">AUS - Austin-Bergstrom International Airport</option>
                        <option value="Nashville International Airport">BNA - Nashville International Airport</option>
                        <option value="Charlotte Douglas International Airport">CLT - Charlotte Douglas International Airport</option>
                        <option value="Raleigh-Durham International Airport">RDU - Raleigh-Durham International Airport</option>
                        <option value="Huntsville International Airport">HSV - Huntsville International Airport</option>
                    </optgroup>
                    
                    <!-- UNITED STATES - FLORIDA -->
                    <optgroup label="üá∫üá∏ Florida">
                        <option value="Miami International Airport">MIA - Miami International Airport</option>
                        <option value="Fort Lauderdale-Hollywood International Airport">FLL - Fort Lauderdale-Hollywood International</option>
                        <option value="Orlando International Airport">MCO - Orlando International Airport</option>
                        <option value="Tampa International Airport">TPA - Tampa International Airport</option>
                        <option value="Jacksonville International Airport">JAX - Jacksonville International Airport</option>
                        <option value="Southwest Florida International Airport">RSW - Southwest Florida International Airport (Fort Myers)</option>
                    </optgroup>
                    
                    <!-- UNITED STATES - NORTHEAST -->
                    <optgroup label="üá∫üá∏ Northeast">
                        <option value="John F. Kennedy International Airport">JFK - John F. Kennedy International Airport</option>
                        <option value="Newark Liberty International Airport">EWR - Newark Liberty International Airport</option>
                        <option value="LaGuardia Airport">LGA - LaGuardia Airport</option>
                        <option value="Boston Logan International Airport">BOS - Boston Logan International Airport</option>
                        <option value="Philadelphia International Airport">PHL - Philadelphia International Airport</option>
                        <option value="Ronald Reagan Washington National Airport">DCA - Ronald Reagan Washington National</option>
                        <option value="Washington Dulles International Airport">IAD - Washington Dulles International Airport</option>
                    </optgroup>
                    
                    <!-- CANADA -->
                    <optgroup label="üá®üá¶ Canada">
                        <option value="Toronto Pearson International Airport">YYZ - Toronto Pearson International Airport</option>
                        <option value="Vancouver International Airport">YVR - Vancouver International Airport</option>
                        <option value="Montreal-Pierre Elliott Trudeau International Airport">YUL - Montreal-Pierre Elliott Trudeau International</option>
                    </optgroup>
                    
                    <!-- MEXICO -->
                    <optgroup label="üá≤üáΩ Mexico">
                        <option value="Mexico City International Airport">MEX - Mexico City International Airport</option>
                        <option value="Canc√∫n International Airport">CUN - Canc√∫n International Airport</option>
                    </optgroup>
                    
                    <!-- EUROPE - UK & IRELAND -->
                    <optgroup label="üá¨üáß United Kingdom & Ireland">
                        <option value="London Heathrow Airport">LHR - London Heathrow Airport</option>
                        <option value="London Gatwick Airport">LGW - London Gatwick Airport</option>
                        <option value="Dublin Airport">DUB - Dublin Airport</option>
                    </optgroup>
                    
                    <!-- EUROPE - WESTERN -->
                    <optgroup label="üá™üá∫ Europe - Western">
                        <option value="Paris Charles de Gaulle Airport">CDG - Paris Charles de Gaulle Airport</option>
                        <option value="Amsterdam Schiphol Airport">AMS - Amsterdam Schiphol Airport</option>
                        <option value="Frankfurt Airport">FRA - Frankfurt Airport</option>
                    </optgroup>
                    
                    <!-- MIDDLE EAST -->
                    <optgroup label="üèúÔ∏è Middle East">
                        <option value="Dubai International Airport">DXB - Dubai International Airport</option>
                        <option value="Doha Hamad International Airport">DOH - Doha Hamad International Airport</option>
                    </optgroup>
                    
                    <!-- ASIA -->
                    <optgroup label="üåè Asia">
                        <option value="Tokyo Narita International Airport">NRT - Tokyo Narita International Airport</option>
                        <option value="Seoul Incheon International Airport">ICN - Seoul Incheon International Airport</option>
                        <option value="Singapore Changi Airport">SIN - Singapore Changi Airport</option>
                        <option value="Hong Kong International Airport">HKG - Hong Kong International Airport</option>
                    </optgroup>
                    
                    <!-- AUSTRALIA -->
                    <optgroup label="üá¶üá∫ Australia">
                        <option value="Sydney Kingsford Smith Airport">SYD - Sydney Kingsford Smith Airport</option>
                        <option value="Melbourne Airport">MEL - Melbourne Airport</option>
                        <option value="Brisbane Airport">BNE - Brisbane Airport</option>
                        <option value="Perth Airport">PER - Perth Airport</option>
                        <option value="Adelaide Airport">ADL - Adelaide Airport</option>
                        <option value="Cairns Airport">CNS - Cairns Airport</option>
                        <option value="Gold Coast Airport">OOL - Gold Coast Airport</option>
                    </optgroup>
                    
                    <!-- NEW ZEALAND -->
                    <optgroup label="üá≥üáø New Zealand">
                        <option value="Auckland Airport">AKL - Auckland Airport</option>
                        <option value="Wellington International Airport">WLG - Wellington International Airport</option>
                        <option value="Christchurch International Airport">CHC - Christchurch International Airport</option>
                        <option value="Queenstown Airport">ZQN - Queenstown Airport</option>
                    </optgroup>
                </select>
                <small class="info-text">Quick-select major airports worldwide</small>
            </div>
            
            <div class="form-group">
                <label for="serviceType">Service Type *</label>
                <select id="serviceType" name="service_type" required>
                    <option value="">Select service...</option>
                    <option value="airport_pickup">Airport Pickup (Airport ‚Üí Home/Hotel)</option>
                    <option value="airport_dropoff">Airport Dropoff (Home/Hotel ‚Üí Airport)</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="pickupLocationSelect">Pickup Location - Quick Select (Optional)</label>
                <select id="pickupLocationSelect" name="pickupLocationSelect">
                    <option value="">-- Quick select or enter address below --</option>
                    
                    <!-- AIRPORTS - US WEST -->
                    <optgroup label="‚úàÔ∏è Airports - West Coast">
                        <option value="Los Angeles International Airport, 1 World Way, Los Angeles, CA 90045">LAX - Los Angeles International Airport</option>
                        <option value="San Francisco International Airport, San Francisco, CA 94128">SFO - San Francisco International Airport</option>
                        <option value="Seattle-Tacoma International Airport, Seattle, WA 98158">SEA - Seattle-Tacoma International Airport</option>
                        <option value="Portland International Airport, Portland, OR 97218">PDX - Portland International Airport</option>
                        <option value="San Diego International Airport, San Diego, CA 92101">SAN - San Diego International Airport</option>
                        <option value="Norman Y. Mineta San Jose International Airport, San Jose, CA 95110">SJC - San Jose International Airport</option>
                        <option value="Hollywood Burbank Airport, Burbank, CA 91505">BUR - Hollywood Burbank Airport</option>
                        <option value="Long Beach Airport, Long Beach, CA 90806">LGB - Long Beach Airport</option>
                        <option value="Fresno Yosemite International Airport, Fresno, CA 93727">FAT - Fresno Yosemite International Airport</option>
                        <option value="Las Vegas Harry Reid International Airport, Las Vegas, NV 89111">LAS - Las Vegas Harry Reid International Airport</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - US MOUNTAIN -->
                    <optgroup label="‚úàÔ∏è Airports - Mountain Region">
                        <option value="Denver International Airport, 8500 Pena Blvd, Denver, CO 80249">DEN - Denver International Airport</option>
                        <option value="Colorado Springs Airport, 7770 Milton E Proby Pkwy, Colorado Springs, CO 80916">COS - Colorado Springs Airport</option>
                        <option value="Phoenix Sky Harbor International Airport, Phoenix, AZ 85034">PHX - Phoenix Sky Harbor International Airport</option>
                        <option value="Salt Lake City International Airport, Salt Lake City, UT 84122">SLC - Salt Lake City International Airport</option>
                        <option value="Albuquerque International Sunport, Albuquerque, NM 87106">ABQ - Albuquerque International Sunport</option>
                        <option value="Santa Fe Regional Airport, Santa Fe, NM 87507">SAF - Santa Fe Regional Airport</option>
                        <option value="Boise Airport, Boise, ID 83705">BOI - Boise Airport</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - US MIDWEST -->
                    <optgroup label="‚úàÔ∏è Airports - Midwest">
                        <option value="Chicago O'Hare International Airport, Chicago, IL 60666">ORD - Chicago O'Hare International Airport</option>
                        <option value="Minneapolis-St. Paul International Airport, Minneapolis, MN 55111">MSP - Minneapolis-St. Paul International Airport</option>
                        <option value="Detroit Metropolitan Wayne County Airport, Detroit, MI 48242">DTW - Detroit Metropolitan Airport</option>
                        <option value="Chicago Midway International Airport, Chicago, IL 60638">MDW - Chicago Midway International Airport</option>
                        <option value="Indianapolis International Airport, Indianapolis, IN 46241">IND - Indianapolis International Airport</option>
                        <option value="Kansas City International Airport, Kansas City, MO 64153">MCI - Kansas City International Airport</option>
                        <option value="Dane County Regional Airport, Madison, WI 53704">MSN - Dane County Regional Airport (Madison)</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - US SOUTH -->
                    <optgroup label="‚úàÔ∏è Airports - South">
                        <option value="Hartsfield-Jackson Atlanta International Airport, Atlanta, GA 30320">ATL - Hartsfield-Jackson Atlanta International Airport</option>
                        <option value="Dallas/Fort Worth International Airport, Dallas, TX 75261">DFW - Dallas/Fort Worth International Airport</option>
                        <option value="George Bush Intercontinental Airport, Houston, TX 77032">IAH - Houston George Bush Intercontinental</option>
                        <option value="Austin-Bergstrom International Airport, Austin, TX 78719">AUS - Austin-Bergstrom International Airport</option>
                        <option value="Nashville International Airport, Nashville, TN 37214">BNA - Nashville International Airport</option>
                        <option value="Charlotte Douglas International Airport, Charlotte, NC 28208">CLT - Charlotte Douglas International Airport</option>
                        <option value="Raleigh-Durham International Airport, Morrisville, NC 27560">RDU - Raleigh-Durham International Airport</option>
                        <option value="Raleigh-Durham International Airport">RDU - Raleigh-Durham International Airport</option>
                        <option value="Huntsville International Airport, Huntsville, AL 35824">HSV - Huntsville International Airport</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - US FLORIDA -->
                    <optgroup label="‚úàÔ∏è Airports - Florida">
                        <option value="Miami International Airport, Miami, FL 33126">MIA - Miami International Airport</option>
                        <option value="Fort Lauderdale-Hollywood International Airport, Fort Lauderdale, FL 33315">FLL - Fort Lauderdale-Hollywood International</option>
                        <option value="Orlando International Airport, Orlando, FL 32827">MCO - Orlando International Airport</option>
                        <option value="Tampa International Airport, Tampa, FL 33607">TPA - Tampa International Airport</option>
                        <option value="Jacksonville International Airport, Jacksonville, FL 32229">JAX - Jacksonville International Airport</option>
                        <option value="Southwest Florida International Airport, Fort Myers, FL 33913">RSW - Southwest Florida International Airport (Fort Myers)</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - US NORTHEAST -->
                    <optgroup label="‚úàÔ∏è Airports - Northeast">
                        <option value="John F. Kennedy International Airport, Queens, NY 11430">JFK - John F. Kennedy International Airport</option>
                        <option value="Newark Liberty International Airport, Newark, NJ 07114">EWR - Newark Liberty International Airport</option>
                        <option value="LaGuardia Airport, Queens, NY 11371">LGA - LaGuardia Airport</option>
                        <option value="Boston Logan International Airport, Boston, MA 02128">BOS - Boston Logan International Airport</option>
                        <option value="Philadelphia International Airport, Philadelphia, PA 19153">PHL - Philadelphia International Airport</option>
                        <option value="Ronald Reagan Washington National Airport, Arlington, VA 22202">DCA - Ronald Reagan Washington National</option>
                        <option value="Washington Dulles International Airport, Dulles, VA 20166">IAD - Washington Dulles International Airport</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - CANADA -->
                    <optgroup label="‚úàÔ∏è Airports - Canada">
                        <option value="Toronto Pearson International Airport, Mississauga, ON L5P 1B2, Canada">YYZ - Toronto Pearson International Airport</option>
                        <option value="Vancouver International Airport, Richmond, BC V7B 0A1, Canada">YVR - Vancouver International Airport</option>
                        <option value="Montreal-Pierre Elliott Trudeau International Airport, Dorval, QC H4Y 1H1, Canada">YUL - Montreal International Airport</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - INTERNATIONAL -->
                    <optgroup label="‚úàÔ∏è Airports - International">
                        <option value="London Heathrow Airport, Longford TW6, UK">LHR - London Heathrow Airport</option>
                        <option value="Paris Charles de Gaulle Airport, 95700 Roissy-en-France, France">CDG - Paris Charles de Gaulle Airport</option>
                        <option value="Frankfurt Airport, 60547 Frankfurt, Germany">FRA - Frankfurt Airport</option>
                        <option value="Dubai International Airport, Dubai, UAE">DXB - Dubai International Airport</option>
                        <option value="Tokyo Narita International Airport, Narita, Chiba 282-0004, Japan">NRT - Tokyo Narita International Airport</option>
                        <option value="Sydney Kingsford Smith Airport, Sydney NSW 2020, Australia">SYD - Sydney Kingsford Smith Airport</option>
                        <option value="Melbourne Airport, Melbourne VIC 3045, Australia">MEL - Melbourne Airport</option>
                        <option value="Brisbane Airport, Brisbane QLD 4008, Australia">BNE - Brisbane Airport</option>
                        <option value="Perth Airport, Perth WA 6105, Australia">PER - Perth Airport</option>
                        <option value="Adelaide Airport, Adelaide SA 5950, Australia">ADL - Adelaide Airport</option>
                        <option value="Cairns Airport, Cairns QLD 4870, Australia">CNS - Cairns Airport</option>
                        <option value="Gold Coast Airport, Coolangatta QLD 4225, Australia">OOL - Gold Coast Airport</option>
                        <option value="Auckland Airport, Auckland 2022, New Zealand">AKL - Auckland Airport</option>
                        <option value="Wellington International Airport, Wellington 6022, New Zealand">WLG - Wellington International Airport</option>
                        <option value="Christchurch International Airport, Christchurch 8053, New Zealand">CHC - Christchurch International Airport</option>
                        <option value="Queenstown Airport, Queenstown 9371, New Zealand">ZQN - Queenstown Airport</option>
                    </optgroup>
                    
                    <!-- DENVER CRASHPADS -->
                    <optgroup label="üè† Denver Based Flight Attendants - Known Crew Housing">
                        <option value="6660 Lisbon Street, Aurora, CO 80019">6660 Lisbon Street, Aurora, CO 80019</option>
                        <option value="1777 Willow St, Denver, CO 80220">1777 Willow St, Denver, CO 80220</option>
                        <option value="5489 Netherland St, Denver, CO 80249">5489 Netherland St, Denver, CO 80249</option>
                        <option value="20920 52nd Ave, Denver, CO 80249">20920 52nd Ave, Denver, CO 80249</option>
                        <option value="4909 Green Valley Ranch Blvd, Denver, CO 80249">4909 Green Valley Ranch Blvd, Denver, CO 80249</option>
                        <option value="20040 Mitchell Cir, Denver, CO 80249">20040 Mitchell Cir, Denver, CO 80249</option>
                        <option value="18001 E 47th Dr, Denver, CO 80249">18001 E 47th Dr, Denver, CO 80249</option>
                        <option value="18109 E 51st Pl, Denver, CO 80249">18109 E 51st Pl, Denver, CO 80249</option>
                        <option value="18113 E 51st Ave, Denver, CO 80249">18113 E 51st Ave, Denver, CO 80249</option>
                        <option value="10058 Granby St, Commerce City, CO 80022">10058 Granby St, Commerce City, CO 80022</option>
                        <option value="11446 Helena St, Commerce City, CO 80022">11446 Helena St, Commerce City, CO 80022</option>
                        <option value="12975 E 107th Pl, Commerce City, CO 80022">12975 E 107th Pl, Commerce City, CO 80022</option>
                    </optgroup>
                </select>
                <small class="info-text">Quick-select airport or crashpad, or enter custom address below</small>
            </div>
            
            <div class="form-group">
                <label for="pickupLocation">Pickup Location (Enter or Auto-Filled)</label>
                <input type="text" id="pickupLocation" name="pickup_location" 
                       placeholder="Full address with city, state, zip">
            </div>
            
            <div class="form-group">
                <label for="dropoffLocationSelect">Dropoff Location - Quick Select (Optional)</label>
                <select id="dropoffLocationSelect" name="dropoffLocationSelect">
                    <option value="">-- Quick select or enter address below --</option>
                    
                    <!-- AIRPORTS - US WEST -->
                    <optgroup label="‚úàÔ∏è Airports - West Coast">
                        <option value="Los Angeles International Airport, 1 World Way, Los Angeles, CA 90045">LAX - Los Angeles International Airport</option>
                        <option value="San Francisco International Airport, San Francisco, CA 94128">SFO - San Francisco International Airport</option>
                        <option value="Seattle-Tacoma International Airport, Seattle, WA 98158">SEA - Seattle-Tacoma International Airport</option>
                        <option value="Portland International Airport, Portland, OR 97218">PDX - Portland International Airport</option>
                        <option value="San Diego International Airport, San Diego, CA 92101">SAN - San Diego International Airport</option>
                        <option value="Norman Y. Mineta San Jose International Airport, San Jose, CA 95110">SJC - San Jose International Airport</option>
                        <option value="Hollywood Burbank Airport, Burbank, CA 91505">BUR - Hollywood Burbank Airport</option>
                        <option value="Long Beach Airport, Long Beach, CA 90806">LGB - Long Beach Airport</option>
                        <option value="Fresno Yosemite International Airport, Fresno, CA 93727">FAT - Fresno Yosemite International Airport</option>
                        <option value="Las Vegas Harry Reid International Airport, Las Vegas, NV 89111">LAS - Las Vegas Harry Reid International Airport</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - US MOUNTAIN -->
                    <optgroup label="‚úàÔ∏è Airports - Mountain Region">
                        <option value="Denver International Airport, 8500 Pena Blvd, Denver, CO 80249">DEN - Denver International Airport</option>
                        <option value="Colorado Springs Airport, 7770 Milton E Proby Pkwy, Colorado Springs, CO 80916">COS - Colorado Springs Airport</option>
                        <option value="Phoenix Sky Harbor International Airport, Phoenix, AZ 85034">PHX - Phoenix Sky Harbor International Airport</option>
                        <option value="Salt Lake City International Airport, Salt Lake City, UT 84122">SLC - Salt Lake City International Airport</option>
                        <option value="Albuquerque International Sunport, Albuquerque, NM 87106">ABQ - Albuquerque International Sunport</option>
                        <option value="Santa Fe Regional Airport, Santa Fe, NM 87507">SAF - Santa Fe Regional Airport</option>
                        <option value="Boise Airport, Boise, ID 83705">BOI - Boise Airport</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - US MIDWEST -->
                    <optgroup label="‚úàÔ∏è Airports - Midwest">
                        <option value="Chicago O'Hare International Airport, Chicago, IL 60666">ORD - Chicago O'Hare International Airport</option>
                        <option value="Minneapolis-St. Paul International Airport, Minneapolis, MN 55111">MSP - Minneapolis-St. Paul International Airport</option>
                        <option value="Detroit Metropolitan Wayne County Airport, Detroit, MI 48242">DTW - Detroit Metropolitan Airport</option>
                        <option value="Chicago Midway International Airport, Chicago, IL 60638">MDW - Chicago Midway International Airport</option>
                        <option value="Indianapolis International Airport, Indianapolis, IN 46241">IND - Indianapolis International Airport</option>
                        <option value="Kansas City International Airport, Kansas City, MO 64153">MCI - Kansas City International Airport</option>
                        <option value="Dane County Regional Airport, Madison, WI 53704">MSN - Dane County Regional Airport (Madison)</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - US SOUTH -->
                    <optgroup label="‚úàÔ∏è Airports - South">
                        <option value="Hartsfield-Jackson Atlanta International Airport, Atlanta, GA 30320">ATL - Hartsfield-Jackson Atlanta International Airport</option>
                        <option value="Dallas/Fort Worth International Airport, Dallas, TX 75261">DFW - Dallas/Fort Worth International Airport</option>
                        <option value="George Bush Intercontinental Airport, Houston, TX 77032">IAH - Houston George Bush Intercontinental</option>
                        <option value="Austin-Bergstrom International Airport, Austin, TX 78719">AUS - Austin-Bergstrom International Airport</option>
                        <option value="Nashville International Airport, Nashville, TN 37214">BNA - Nashville International Airport</option>
                        <option value="Charlotte Douglas International Airport, Charlotte, NC 28208">CLT - Charlotte Douglas International Airport</option>
                        <option value="Raleigh-Durham International Airport, Morrisville, NC 27560">RDU - Raleigh-Durham International Airport</option>
                        <option value="Raleigh-Durham International Airport">RDU - Raleigh-Durham International Airport</option>
                        <option value="Huntsville International Airport, Huntsville, AL 35824">HSV - Huntsville International Airport</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - US FLORIDA -->
                    <optgroup label="‚úàÔ∏è Airports - Florida">
                        <option value="Miami International Airport, Miami, FL 33126">MIA - Miami International Airport</option>
                        <option value="Fort Lauderdale-Hollywood International Airport, Fort Lauderdale, FL 33315">FLL - Fort Lauderdale-Hollywood International</option>
                        <option value="Orlando International Airport, Orlando, FL 32827">MCO - Orlando International Airport</option>
                        <option value="Tampa International Airport, Tampa, FL 33607">TPA - Tampa International Airport</option>
                        <option value="Jacksonville International Airport, Jacksonville, FL 32229">JAX - Jacksonville International Airport</option>
                        <option value="Southwest Florida International Airport, Fort Myers, FL 33913">RSW - Southwest Florida International Airport (Fort Myers)</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - US NORTHEAST -->
                    <optgroup label="‚úàÔ∏è Airports - Northeast">
                        <option value="John F. Kennedy International Airport, Queens, NY 11430">JFK - John F. Kennedy International Airport</option>
                        <option value="Newark Liberty International Airport, Newark, NJ 07114">EWR - Newark Liberty International Airport</option>
                        <option value="LaGuardia Airport, Queens, NY 11371">LGA - LaGuardia Airport</option>
                        <option value="Boston Logan International Airport, Boston, MA 02128">BOS - Boston Logan International Airport</option>
                        <option value="Philadelphia International Airport, Philadelphia, PA 19153">PHL - Philadelphia International Airport</option>
                        <option value="Ronald Reagan Washington National Airport, Arlington, VA 22202">DCA - Ronald Reagan Washington National</option>
                        <option value="Washington Dulles International Airport, Dulles, VA 20166">IAD - Washington Dulles International Airport</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - CANADA -->
                    <optgroup label="‚úàÔ∏è Airports - Canada">
                        <option value="Toronto Pearson International Airport, Mississauga, ON L5P 1B2, Canada">YYZ - Toronto Pearson International Airport</option>
                        <option value="Vancouver International Airport, Richmond, BC V7B 0A1, Canada">YVR - Vancouver International Airport</option>
                        <option value="Montreal-Pierre Elliott Trudeau International Airport, Dorval, QC H4Y 1H1, Canada">YUL - Montreal International Airport</option>
                    </optgroup>
                    
                    <!-- AIRPORTS - INTERNATIONAL -->
                    <optgroup label="‚úàÔ∏è Airports - International">
                        <option value="London Heathrow Airport, Longford TW6, UK">LHR - London Heathrow Airport</option>
                        <option value="Paris Charles de Gaulle Airport, 95700 Roissy-en-France, France">CDG - Paris Charles de Gaulle Airport</option>
                        <option value="Frankfurt Airport, 60547 Frankfurt, Germany">FRA - Frankfurt Airport</option>
                        <option value="Dubai International Airport, Dubai, UAE">DXB - Dubai International Airport</option>
                        <option value="Tokyo Narita International Airport, Narita, Chiba 282-0004, Japan">NRT - Tokyo Narita International Airport</option>
                        <option value="Sydney Kingsford Smith Airport, Sydney NSW 2020, Australia">SYD - Sydney Kingsford Smith Airport</option>
                        <option value="Melbourne Airport, Melbourne VIC 3045, Australia">MEL - Melbourne Airport</option>
                        <option value="Brisbane Airport, Brisbane QLD 4008, Australia">BNE - Brisbane Airport</option>
                        <option value="Perth Airport, Perth WA 6105, Australia">PER - Perth Airport</option>
                        <option value="Adelaide Airport, Adelaide SA 5950, Australia">ADL - Adelaide Airport</option>
                        <option value="Cairns Airport, Cairns QLD 4870, Australia">CNS - Cairns Airport</option>
                        <option value="Gold Coast Airport, Coolangatta QLD 4225, Australia">OOL - Gold Coast Airport</option>
                        <option value="Auckland Airport, Auckland 2022, New Zealand">AKL - Auckland Airport</option>
                        <option value="Wellington International Airport, Wellington 6022, New Zealand">WLG - Wellington International Airport</option>
                        <option value="Christchurch International Airport, Christchurch 8053, New Zealand">CHC - Christchurch International Airport</option>
                        <option value="Queenstown Airport, Queenstown 9371, New Zealand">ZQN - Queenstown Airport</option>
                    </optgroup>
                    
                    <!-- DENVER CRASHPADS -->
                    <optgroup label="üè† Denver Based Flight Attendants - Known Crew Housing">
                        <option value="6660 Lisbon Street, Aurora, CO 80019">6660 Lisbon Street, Aurora, CO 80019</option>
                        <option value="1777 Willow St, Denver, CO 80220">1777 Willow St, Denver, CO 80220</option>
                        <option value="5489 Netherland St, Denver, CO 80249">5489 Netherland St, Denver, CO 80249</option>
                        <option value="20920 52nd Ave, Denver, CO 80249">20920 52nd Ave, Denver, CO 80249</option>
                        <option value="4909 Green Valley Ranch Blvd, Denver, CO 80249">4909 Green Valley Ranch Blvd, Denver, CO 80249</option>
                        <option value="20040 Mitchell Cir, Denver, CO 80249">20040 Mitchell Cir, Denver, CO 80249</option>
                        <option value="18001 E 47th Dr, Denver, CO 80249">18001 E 47th Dr, Denver, CO 80249</option>
                        <option value="18109 E 51st Pl, Denver, CO 80249">18109 E 51st Pl, Denver, CO 80249</option>
                        <option value="18113 E 51st Ave, Denver, CO 80249">18113 E 51st Ave, Denver, CO 80249</option>
                        <option value="10058 Granby St, Commerce City, CO 80022">10058 Granby St, Commerce City, CO 80022</option>
                        <option value="11446 Helena St, Commerce City, CO 80022">11446 Helena St, Commerce City, CO 80022</option>
                        <option value="12975 E 107th Pl, Commerce City, CO 80022">12975 E 107th Pl, Commerce City, CO 80022</option>
                    </optgroup>
                </select>
                <small class="info-text">Quick-select airport or crashpad, or enter custom address below</small>
            </div>
            
            <div class="form-group">
                <label for="dropoffLocation">Dropoff Location (Enter or Auto-Filled)</label>
                <input type="text" id="dropoffLocation" name="dropoff_location" 
                       placeholder="Full address with city, state, zip">
            </div>
            
            <div class="row">
                <div class="form-group">
                    <label for="pickupDate">Pickup Date *</label>
                    <input type="date" id="pickupDate" name="pickup_date" required>
                </div>
                
                <div class="form-group">
                    <label for="pickupTime">Pickup Time *</label>
                    <input type="time" id="pickupTime" name="pickup_time" required>
                </div>
            </div>
            
            <div class="row">
                <div class="form-group">
                    <label for="passengers">Passengers *</label>
                    <select id="passengers" name="passengers" required>
                        <option value="1" selected>1 passenger</option>
                        <option value="2">2 passengers</option>
                        <option value="3">3 passengers</option>
                        <option value="4">4 passengers</option>
                        <option value="5">5+ passengers</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="luggage">Luggage</label>
                    <select id="luggage" name="luggage">
                        <option value="0">No luggage</option>
                        <option value="1" selected>1 bag</option>
                        <option value="2">2 bags</option>
                        <option value="3">3+ bags</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label for="flightNumber">Your Flight Number (Optional)</label>
                <input type="text" id="flightNumber" name="flight_number" 
                       placeholder="e.g., UA1234, DL5678">
                <small class="info-text">We'll track your flight and adjust pickup time if delayed</small>
            </div>
            
            <button type="button" class="calc-btn" id="calcBtn">üìç Calculate Distance & Price</button>

            <div id="priceEstimate" class="price-estimate">
                <h3>üí∞ Estimated Price</h3>
                <div class="price-details">
                    <span class="distance" id="distanceDisplay">Distance: -- miles</span>
                    <span class="price" id="priceDisplay">$--</span>
                </div>
                <small style="color:#1565c0;margin-top:0.5rem;display:block">Airline Crew Discounted Rate</small>
            </div>
            
            <div class="form-group">
                <label for="baseAirport">Your Base Airport (Optional)</label>
                <input type="text" id="baseAirport" name="baseAirport" 
                       placeholder="e.g., DEN, ORD, ATL, LAX" 
                       style="text-transform:uppercase">
                <small class="info-text">Your airline's home base airport code</small>
            </div>

            <div class="form-group">
                <label for="tripType">Trip Type (Optional)</label>
                <select id="tripType" name="tripType">
                    <option value="">-- Select Trip Type --</option>
                    <option value="returning-home">üè† Returning home from work trip</option>
                    <option value="going-to-work">‚úàÔ∏è Going to work (heading to airport for trip)</option>
                    <option value="commuting">üöó Commuting</option>
                    <option value="deadheading">Deadheading</option>
                    <option value="positioning">Positioning flight</option>
                </select>
                <small class="info-text">Helps us understand if you're coming or going</small>
            </div>
            
            <div class="crew-id-section">
                <h4>üé´ Crew Member Verification (Optional for discount)</h4>
                <div class="form-group">
                    <label for="airline">Airline</label>
                    <select id="airline" name="airline">
                        <option value="">Select airline...</option>
                        <option value="frontier">Frontier Airlines</option>
                        <option value="united">United Airlines</option>
                        <option value="southwest">Southwest Airlines</option>
                        <option value="delta">Delta Air Lines</option>
                        <option value="american">American Airlines</option>
                        <option value="spirit">Spirit Airlines</option>
                        <option value="other">Other Airline</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label for="passengerName">Your Name *</label>
                <input type="text" id="passengerName" name="passenger_name" required>
            </div>
            
            <div class="form-group">
                <label for="phone">Phone Number *</label>
                <input type="tel" id="phone" name="phone" 
                       placeholder="(720) 555-0123" required>
            </div>
            
            <div class="form-group">
                <label for="email">Email Address (Optional)</label>
                <input type="email" id="email" name="email">
            </div>
            
            <div class="form-group">
                <label for="specialRequests">Special Requests</label>
                <textarea id="specialRequests" name="special_requests" 
                          placeholder="Early morning pickup, quiet ride for rest, etc."></textarea>
            </div>
            
            <!-- Cloudflare Turnstile Widget -->
            <div class="turnstile-container">
                <div class="cf-turnstile" 
                     data-sitekey="0x4AAAAAACMebvxe_6kPGUnO"
                     data-theme="light"
                     data-size="normal"
                     data-callback="onCrewBookingVerified">
                </div>
            </div>
            
            <button type="submit" id="bookingBtn">Book Crew Transportation</button>
        </form>
        
        <p style="text-align: center; margin-top: 20px; color: #666; font-size: 13px;">
            24/7 Crew Support: <strong>WhatsApp</strong>
        </p>
    </div>
    
    <script>
        // ========================================
        // PRICING CONFIGURATION
        // ========================================
        var BASE_FARE = 2.45;
        var PER_MILE_RATE = 1.25;
        var MINIMUM_FARE = 10;
        var MAXIMUM_FARE = 18;
        var FREE_MILES = 0;

        var map;
        var placesService;
        let bookingVerified = false;
        
        // Google Maps callback
        function initGoogleMaps() {
            console.log('Google Maps loaded');
            map = new google.maps.Map(document.createElement('div'));
            placesService = new google.maps.places.PlacesService(map);
        }
        
        // Set minimum date to today
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('pickupDate').min = today;
        
        // Turnstile callback
        function onCrewBookingVerified(token) {
            bookingVerified = true;
            console.log('Crew booking verified');
        }
        
        // ========================================
        // CRASH PAD AUTO-FILL (LEGACY - keeping for backward compatibility)
        // ========================================
        if (document.getElementById('crashpadSelect')) {
            document.getElementById('crashpadSelect').addEventListener('change', function() {
                var selectedAddress = this.value;
                if (selectedAddress) {
                    document.getElementById('pickupLocation').value = selectedAddress;
                }
            });
        }
        
        // ========================================
        // PICKUP LOCATION SELECT AUTO-FILL
        // ========================================
        document.getElementById('pickupLocationSelect').addEventListener('change', function() {
            var selectedLocation = this.value;
            if (selectedLocation) {
                document.getElementById('pickupLocation').value = selectedLocation;
            }
        });
        
        // ========================================
        // DROPOFF LOCATION SELECT AUTO-FILL
        // ========================================
        document.getElementById('dropoffLocationSelect').addEventListener('change', function() {
            var selectedLocation = this.value;
            if (selectedLocation) {
                document.getElementById('dropoffLocation').value = selectedLocation;
            }
        });
        
        // ========================================
        // AIRPORT SELECT AUTO-FILL (LEGACY - keeping for backward compatibility)
        // ========================================
        if (document.getElementById('airportSelect')) {
            document.getElementById('airportSelect').addEventListener('change', function() {
                var selectedAirport = this.value;
                var serviceType = document.getElementById('serviceType').value;
                
                if (selectedAirport) {
                    if (serviceType === 'airport_pickup') {
                        document.getElementById('pickupLocation').value = selectedAirport;
                    } else if (serviceType === 'airport_dropoff') {
                        document.getElementById('dropoffLocation').value = selectedAirport;
                    } else {
                        document.getElementById('pickupLocation').value = selectedAirport;
                    }
                }
            });
        }
        
        // ========================================
        // SERVICE TYPE - AUTO-FILL AIRPORT
        // ========================================
        document.getElementById('serviceType').addEventListener('change', (e) => {
            const pickupField = document.getElementById('pickupLocation');
            const dropoffField = document.getElementById('dropoffLocation');
            
            if (e.target.value === 'airport_pickup') {
                // Coming FROM airport - pickup is airport, dropoff is their address
                pickupField.placeholder = 'Airport name and terminal';
                dropoffField.placeholder = 'Your home, hotel, or crashpad address';
            } else if (e.target.value === 'airport_dropoff') {
                // Going TO airport - pickup is their address, dropoff is airport
                pickupField.placeholder = 'Your home, hotel, or crashpad address';
                dropoffField.placeholder = 'Airport name and terminal';
            }
        });
        
        // ========================================
        // CALCULATE PRICE WITH GOOGLE MAPS
        // ========================================
        document.getElementById('calcBtn').addEventListener('click', function() {
            var pickupLocation = document.getElementById('pickupLocation').value;
            var dropoffLocation = document.getElementById('dropoffLocation').value;
            var serviceType = document.getElementById('serviceType').value;

            if (!pickupLocation || !dropoffLocation) {
                alert('Please enter both pickup and dropoff locations first');
                return;
            }
            
            if (!serviceType) {
                alert('Please select a service type first');
                return;
            }

            if (typeof google === 'undefined' || !placesService) {
                alert('Google Maps is still loading. Please wait a moment and try again.');
                return;
            }

            var calcBtn = document.getElementById('calcBtn');
            calcBtn.disabled = true;
            calcBtn.textContent = 'Calculating...';

            var pickupRequest = {
                query: pickupLocation + ', USA',
                fields: ['geometry', 'formatted_address']
            };

            placesService.findPlaceFromQuery(pickupRequest, function(results1, status1) {
                if (status1 === google.maps.places.PlacesServiceStatus.OK && results1 && results1[0]) {
                    var pickupLoc = results1[0].geometry.location;

                    var dropoffRequest = {
                        query: dropoffLocation + ', USA',
                        fields: ['geometry', 'formatted_address']
                    };

                    placesService.findPlaceFromQuery(dropoffRequest, function(results2, status2) {
                        if (status2 === google.maps.places.PlacesServiceStatus.OK && results2 && results2[0]) {
                            var dropoffLoc = results2[0].geometry.location;

                            var distanceService = new google.maps.DistanceMatrixService();
                            distanceService.getDistanceMatrix({
                                origins: [pickupLoc],
                                destinations: [dropoffLoc],
                                travelMode: 'DRIVING',
                                unitSystem: google.maps.UnitSystem.IMPERIAL
                            }, function(response, status) {
                                if (status === 'OK') {
                                    var result = response.rows[0].elements[0];

                                    if (result.status === 'OK') {
                                        var distanceInMeters = result.distance.value;
                                        var distanceInMiles = (distanceInMeters / 1609.34).toFixed(1);

                                        // Calculate price with crew discount
                                        var price = BASE_FARE;
                                        var chargeableMiles = Math.max(0, distanceInMiles - FREE_MILES);
                                        price += chargeableMiles * PER_MILE_RATE;
                                        price = Math.max(MINIMUM_FARE, Math.min(MAXIMUM_FARE, price));
                                        price = Math.round(price);

                                        document.getElementById('distanceDisplay').textContent = 'Distance: ' + distanceInMiles + ' miles';
                                        document.getElementById('priceDisplay').textContent = '$' + price;
                                        document.getElementById('priceEstimate').style.display = 'block';

                                        // Store in hidden fields
                                        var distanceField = document.createElement('input');
                                        distanceField.type = 'hidden';
                                        distanceField.name = 'calculated_distance';
                                        distanceField.value = distanceInMiles;
                                        document.getElementById('crewBookingForm').appendChild(distanceField);

                                        var priceField = document.createElement('input');
                                        priceField.type = 'hidden';
                                        priceField.name = 'calculated_price';
                                        priceField.value = price;
                                        document.getElementById('crewBookingForm').appendChild(priceField);

                                        calcBtn.disabled = false;
                                        calcBtn.textContent = '‚úì Price Calculated';
                                    } else {
                                        alert('Could not calculate distance: ' + result.status);
                                        calcBtn.disabled = false;
                                        calcBtn.textContent = 'üìç Calculate Distance & Price';
                                    }
                                } else {
                                    alert('Distance calculation failed: ' + status);
                                    calcBtn.disabled = false;
                                    calcBtn.textContent = 'üìç Calculate Distance & Price';
                                }
                            });
                        } else {
                            alert('Could not find dropoff location.\n\nPlease include full address.');
                            calcBtn.disabled = false;
                            calcBtn.textContent = 'üìç Calculate Distance & Price';
                        }
                    });
                } else {
                    alert('Could not find pickup location.\n\nPlease include:\n- Street number and name\n- City, State, Zip\n\nExample: "123 Main St, Aurora, CO 80012"');
                    calcBtn.disabled = false;
                    calcBtn.textContent = 'üìç Calculate Distance & Price';
                }
            });
        });
        
        // Crew booking form handler
        document.getElementById('crewBookingForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const token = formData.get('cf-turnstile-response');
            
            if (!token) {
                showMessage('bookingMessage', 'Please complete the security verification', 'error');
                return;
            }
            
            const btn = document.getElementById('bookingBtn');
            btn.disabled = true;
            btn.textContent = 'Processing Crew Booking...';
            
            try {
                // Convert FormData to JSON object for your API
                const formDataObj = {};
                formData.forEach((value, key) => {
                    formDataObj[key] = value;
                });
                
                // Map form fields to API format
                const payload = {
                    'cf-turnstile-response': token,
                    created_by: formDataObj.passenger_name || 'crew',
                    rider_phone: formDataObj.phone || '',
                    pickup_text: formDataObj.pickup_location || '',
                    dropoff_text: formDataObj.dropoff_location || '',
                    pickup_time_utc: new Date().toISOString(),
                    trip_type: 'AIRPORT',
                    rider_type: 'CREW',
                    direction: formDataObj.service_type === 'airport_pickup' ? 'FROM_AIRPORT' : 'TO_AIRPORT',
                    airport_code: 'DEN',
                    base_airport: formDataObj.baseAirport ? formDataObj.baseAirport.toUpperCase() : null,
                    crew_trip_type: formDataObj.tripType || null,
                    flight_number: formDataObj.flight_number || null,
                    airline: formDataObj.airline || null,
                    notes: formDataObj.special_requests || null
                };
                
                const response = await fetch('https://travylway-api.benterpryzes2084.workers.dev/api/trips', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(payload)
                });
                
                const result = await response.json();
                
                if (result.ok && result.id) {
                    showMessage('bookingMessage', 
                        `‚úÖ Crew booking confirmed! Reference #${result.id.substring(0, 8)}. ` +
                        `You'll receive confirmation via WhatsApp shortly.`, 
                        'success');
                    
                    // Reset form after 3 seconds
                    setTimeout(() => {
                        document.getElementById('crewBookingForm').reset();
                        document.getElementById('priceEstimate').style.display = 'none';
                        btn.disabled = false;
                        btn.textContent = 'Book Crew Transportation';
                        turnstile.reset();
                        hideMessage('bookingMessage');
                    }, 5000);
                } else {
                    showMessage('bookingMessage', 
                        result.error || 'Booking failed. Please try again or call crew support.', 
                        'error');
                    btn.disabled = false;
                    btn.textContent = 'Book Crew Transportation';
                    turnstile.reset();
                }
            } catch (error) {
                console.error('Crew booking error:', error);
                showMessage('bookingMessage', 
                    'Network error. Please call our 24/7 crew support line.', 
                    'error');
                btn.disabled = false;
                btn.textContent = 'Book Crew Transportation';
            }
        });
        
        // Message helper functions
        function showMessage(id, text, type) {
            const msg = document.getElementById(id);
            msg.textContent = text;
            msg.className = `message ${type}`;
        }
        
        function hideMessage(id) {
            const msg = document.getElementById(id);
            msg.className = 'message';
        }
        
        // Auto-refresh Turnstile tokens after 4 minutes
        setInterval(() => {
            if (typeof turnstile !== 'undefined') {
                turnstile.reset();
            }
        }, 4 * 60 * 1000);
    </script>
</body>
</html>
